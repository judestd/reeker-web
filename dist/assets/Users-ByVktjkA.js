import{b as s,g as Z,m as oe,r as se,x as $e,B as Ne,c as V,J as Ie,d as ae,e as M,H as ze,M as ke,N as Ue,P as Ae,O as Te,Q as Be,S as Re,G as le,T as Fe,U as Me,q as ie,y as _e,D as De,V as Le,F as We,I as Ve,t as He,j as a,a as Ge}from"./index-DWVIrarL.js";import{d as ce,D as Ye}from"./index-Cow5DHak.js";import{r as Xe,u as qe}from"./TextArea-ecw0KRlF.js";import{u as Je,A as Ke,T as ne,S as de,a as F,F as Ze,M as Qe}from"./index-7Imk3y3v.js";import{B as J,c as et,a as me}from"./button-ZitA0x0c.js";import{R as tt}from"./EditOutlined-D1PyGwBW.js";import{b as nt,I as D,F as k,s as G}from"./index-CL68ldrU.js";import{C as rt,a as ot}from"./index-BwZGRhAa.js";import{g as q}from"./helpers-Bya_dLxO.js";import"./compact-item-C3Bf5F0_.js";import"./useForceUpdate-DW7K_nWO.js";const K=s.createContext({}),st=e=>{const{antCls:n,componentCls:r,iconCls:t,avatarBg:o,avatarColor:l,containerSize:i,containerSizeLG:m,containerSizeSM:d,textFontSize:u,textFontSizeLG:p,textFontSizeSM:h,borderRadius:v,borderRadiusLG:f,borderRadiusSM:C,lineWidth:b,lineType:S}=e,c=(j,g,E)=>({width:j,height:j,borderRadius:"50%",[`&${r}-square`]:{borderRadius:E},[`&${r}-icon`]:{fontSize:g,[`> ${t}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},se(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:l,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${$e(b)} ${S} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),c(i,u,v)),{"&-lg":Object.assign({},c(m,p,f)),"&-sm":Object.assign({},c(d,h,C)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},at=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:t,groupSpace:o}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:t}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:o}}}},lt=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:t,fontSize:o,fontSizeLG:l,fontSizeXL:i,fontSizeHeading3:m,marginXS:d,marginXXS:u,colorBorderBg:p}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:t,textFontSize:Math.round((l+i)/2),textFontSizeLG:m,textFontSizeSM:o,groupSpace:u,groupOverlapping:-d,groupBorderColor:p}},ue=Z("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,t=oe(e,{avatarBg:r,avatarColor:n});return[st(t),at(t)]},lt);var it=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const ct=(e,n)=>{const[r,t]=s.useState(1),[o,l]=s.useState(!1),[i,m]=s.useState(!0),d=s.useRef(null),u=s.useRef(null),p=Ne(n,d),{getPrefixCls:h,avatar:v}=s.useContext(V),f=s.useContext(K),C=()=>{if(!u.current||!d.current)return;const P=u.current.offsetWidth,w=d.current.offsetWidth;if(P!==0&&w!==0){const{gap:B=4}=e;B*2<w&&t(w-B*2<P?(w-B*2)/P:1)}};s.useEffect(()=>{l(!0)},[]),s.useEffect(()=>{m(!0),t(1)},[e.src]),s.useEffect(C,[e.gap]);const b=()=>{const{onError:P}=e;(P==null?void 0:P())!==!1&&m(!1)},{prefixCls:S,shape:c,size:j,src:g,srcSet:E,icon:N,className:U,rootClassName:L,alt:_,draggable:y,children:x,crossOrigin:A}=e,I=it(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),O=Ie(P=>{var w,B;return(B=(w=j??(f==null?void 0:f.size))!==null&&w!==void 0?w:P)!==null&&B!==void 0?B:"default"}),$=Object.keys(typeof O=="object"?O||{}:{}).some(P=>["xs","sm","md","lg","xl","xxl"].includes(P)),T=Je($),W=s.useMemo(()=>{if(typeof O!="object")return{};const P=Xe.find(B=>T[B]),w=O[P];return w?{width:w,height:w,fontSize:w&&(N||x)?w/2:18}:{}},[T,O]),z=h("avatar",S),ee=ae(z),[Ce,Se,je]=ue(z,ee),Oe=M({[`${z}-lg`]:O==="large",[`${z}-sm`]:O==="small"}),te=s.isValidElement(g),Pe=c||(f==null?void 0:f.shape)||"circle",we=M(z,Oe,v==null?void 0:v.className,`${z}-${Pe}`,{[`${z}-image`]:te||g&&i,[`${z}-icon`]:!!N},je,ee,U,L,Se),Ee=typeof O=="number"?{width:O,height:O,fontSize:N?O/2:18}:{};let H;if(typeof g=="string"&&i)H=s.createElement("img",{src:g,draggable:y,srcSet:E,onError:b,alt:_,crossOrigin:A});else if(te)H=g;else if(N)H=N;else if(o||r!==1){const P=`scale(${r})`,w={msTransform:P,WebkitTransform:P,transform:P};H=s.createElement(ze,{onResize:C},s.createElement("span",{className:`${z}-string`,ref:u,style:Object.assign({},w)},x))}else H=s.createElement("span",{className:`${z}-string`,style:{opacity:0},ref:u},x);return delete I.onError,delete I.gap,Ce(s.createElement("span",Object.assign({},I,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ee),W),v==null?void 0:v.style),I.style),className:we,ref:p}),H))},pe=s.forwardRef(ct),Y=e=>e?typeof e=="function"?e():e:null,dt=e=>{const{componentCls:n,popoverColor:r,titleMinWidth:t,fontWeightStrong:o,innerPadding:l,boxShadowSecondary:i,colorTextHeading:m,borderRadiusLG:d,zIndexPopup:u,titleMarginBottom:p,colorBgElevated:h,popoverBg:v,titleBorderBottom:f,innerContentPadding:C,titlePadding:b}=e;return[{[n]:Object.assign(Object.assign({},se(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":h,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:v,backgroundClip:"padding-box",borderRadius:d,boxShadow:i,padding:l},[`${n}-title`]:{minWidth:t,marginBottom:p,color:m,fontWeight:o,borderBottom:f,padding:b},[`${n}-inner-content`]:{color:r,padding:C}})},Ue(e,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${n}-content`]:{display:"inline-block"}}}]},mt=e=>{const{componentCls:n}=e;return{[n]:Ae.map(r=>{const t=e[`${r}6`];return{[`&${n}-${r}`]:{"--antd-arrow-background-color":t,[`${n}-inner`]:{backgroundColor:t},[`${n}-arrow`]:{background:"transparent"}}}})}},ut=e=>{const{lineWidth:n,controlHeight:r,fontHeight:t,padding:o,wireframe:l,zIndexPopupBase:i,borderRadiusLG:m,marginXS:d,lineType:u,colorSplit:p,paddingSM:h}=e,v=r-t,f=v/2,C=v/2-n,b=o;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:i+30},Te(e)),Be({contentRadius:m,limitVerticalRadius:!0})),{innerPadding:l?0:12,titleMarginBottom:l?0:d,titlePadding:l?`${f}px ${b}px ${C}px`:0,titleBorderBottom:l?`${n}px ${u} ${p}`:"none",innerContentPadding:l?`${h}px ${b}px`:0})},fe=Z("Popover",e=>{const{colorBgElevated:n,colorText:r}=e,t=oe(e,{popoverBg:n,popoverColor:r});return[dt(t),mt(t),ke(t,"zoom-big")]},ut,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var pt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const ge=e=>{let{title:n,content:r,prefixCls:t}=e;return!n&&!r?null:s.createElement(s.Fragment,null,n&&s.createElement("div",{className:`${t}-title`},n),r&&s.createElement("div",{className:`${t}-inner-content`},r))},ft=e=>{const{hashId:n,prefixCls:r,className:t,style:o,placement:l="top",title:i,content:m,children:d}=e,u=Y(i),p=Y(m),h=M(n,r,`${r}-pure`,`${r}-placement-${l}`,t);return s.createElement("div",{className:h,style:o},s.createElement("div",{className:`${r}-arrow`}),s.createElement(Re,Object.assign({},e,{className:n,prefixCls:r}),d||s.createElement(ge,{prefixCls:r,title:u,content:p})))},ve=e=>{const{prefixCls:n,className:r}=e,t=pt(e,["prefixCls","className"]),{getPrefixCls:o}=s.useContext(V),l=o("popover",n),[i,m,d]=fe(l);return i(s.createElement(ft,Object.assign({},t,{prefixCls:l,hashId:m,className:M(r,d)})))};var gt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const vt=s.forwardRef((e,n)=>{var r,t;const{prefixCls:o,title:l,content:i,overlayClassName:m,placement:d="top",trigger:u="hover",children:p,mouseEnterDelay:h=.1,mouseLeaveDelay:v=.1,onOpenChange:f,overlayStyle:C={}}=e,b=gt(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:S}=s.useContext(V),c=S("popover",o),[j,g,E]=fe(c),N=S(),U=M(m,g,E),[L,_]=le(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),y=($,T)=>{_($,!0),f==null||f($,T)},x=$=>{$.keyCode===_e.ESC&&y(!1,$)},A=$=>{y($)},I=Y(l),O=Y(i);return j(s.createElement(Fe,Object.assign({placement:d,trigger:u,mouseEnterDelay:h,mouseLeaveDelay:v,overlayStyle:C},b,{prefixCls:c,overlayClassName:U,ref:n,open:L,onOpenChange:A,overlay:I||O?s.createElement(ge,{prefixCls:c,title:I,content:O}):null,transitionName:Me(N,"zoom-big",b.transitionName),"data-popover-inject":!0}),ie(p,{onKeyDown:$=>{var T,W;s.isValidElement(p)&&((W=p==null?void 0:(T=p.props).onKeyDown)===null||W===void 0||W.call(T,$)),x($)}})))}),Q=vt;Q._InternalPanelDoNotUseOrYouWillBeFired=ve;const re=e=>{const{size:n,shape:r}=s.useContext(K),t=s.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return s.createElement(K.Provider,{value:t},e.children)},ht=e=>{var n,r,t;const{getPrefixCls:o,direction:l}=s.useContext(V),{prefixCls:i,className:m,rootClassName:d,style:u,maxCount:p,maxStyle:h,size:v,shape:f,maxPopoverPlacement:C,maxPopoverTrigger:b,children:S,max:c}=e,j=o("avatar",i),g=`${j}-group`,E=ae(j),[N,U,L]=ue(j,E),_=M(g,{[`${g}-rtl`]:l==="rtl"},L,E,m,d,U),y=De(S).map((I,O)=>ie(I,{key:`avatar-key-${O}`})),x=(c==null?void 0:c.count)||p,A=y.length;if(x&&x<A){const I=y.slice(0,x),O=y.slice(x,A),$=(c==null?void 0:c.style)||h,T=((n=c==null?void 0:c.popover)===null||n===void 0?void 0:n.trigger)||b||"hover",W=((r=c==null?void 0:c.popover)===null||r===void 0?void 0:r.placement)||C||"top",z=Object.assign(Object.assign({content:O},c==null?void 0:c.popover),{overlayClassName:M(`${g}-popover`,(t=c==null?void 0:c.popover)===null||t===void 0?void 0:t.overlayClassName),placement:W,trigger:T});return I.push(s.createElement(Q,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},z),s.createElement(pe,{style:$},`+${A-x}`))),N(s.createElement(re,{shape:f,size:v},s.createElement("div",{className:_,style:u},I)))}return N(s.createElement(re,{shape:f,size:v},s.createElement("div",{className:_,style:u},y)))},he=pe;he.Group=ht;const xt=e=>{const{componentCls:n,iconCls:r,antCls:t,zIndexPopup:o,colorText:l,colorWarning:i,marginXXS:m,marginXS:d,fontSize:u,fontWeightStrong:p,colorTextHeading:h}=e;return{[n]:{zIndex:o,[`&${t}-popover`]:{fontSize:u},[`${n}-message`]:{marginBottom:d,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${r}`]:{color:i,fontSize:u,lineHeight:1,marginInlineEnd:d},[`${n}-title`]:{fontWeight:p,color:h,"&:only-child":{fontWeight:"normal"}},[`${n}-description`]:{marginTop:m,color:l}},[`${n}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:d}}}}},bt=e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}},xe=Z("Popconfirm",e=>xt(e),bt,{resetStyle:!1});var yt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const be=e=>{const{prefixCls:n,okButtonProps:r,cancelButtonProps:t,title:o,description:l,cancelText:i,okText:m,okType:d="primary",icon:u=s.createElement(me,null),showCancel:p=!0,close:h,onConfirm:v,onCancel:f,onPopupClick:C}=e,{getPrefixCls:b}=s.useContext(V),[S]=qe("Popconfirm",Le.Popconfirm),c=Y(o),j=Y(l);return s.createElement("div",{className:`${n}-inner-content`,onClick:C},s.createElement("div",{className:`${n}-message`},u&&s.createElement("span",{className:`${n}-message-icon`},u),s.createElement("div",{className:`${n}-message-text`},c&&s.createElement("div",{className:`${n}-title`},c),j&&s.createElement("div",{className:`${n}-description`},j))),s.createElement("div",{className:`${n}-buttons`},p&&s.createElement(J,Object.assign({onClick:f,size:"small"},t),i||(S==null?void 0:S.cancelText)),s.createElement(Ke,{buttonProps:Object.assign(Object.assign({size:"small"},et(d)),r),actionFn:v,close:h,prefixCls:b("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},m||(S==null?void 0:S.okText))))},Ct=e=>{const{prefixCls:n,placement:r,className:t,style:o}=e,l=yt(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=s.useContext(V),m=i("popconfirm",n),[d]=xe(m);return d(s.createElement(ve,{placement:r,className:M(m,t),style:o,content:s.createElement(be,Object.assign({prefixCls:m},l))}))};var St=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const jt=s.forwardRef((e,n)=>{var r,t;const{prefixCls:o,placement:l="top",trigger:i="click",okType:m="primary",icon:d=s.createElement(me,null),children:u,overlayClassName:p,onOpenChange:h,onVisibleChange:v}=e,f=St(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:C}=s.useContext(V),[b,S]=le(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),c=(y,x)=>{S(y,!0),v==null||v(y),h==null||h(y,x)},j=y=>{c(!1,y)},g=y=>{var x;return(x=e.onConfirm)===null||x===void 0?void 0:x.call(void 0,y)},E=y=>{var x;c(!1,y),(x=e.onCancel)===null||x===void 0||x.call(void 0,y)},N=(y,x)=>{const{disabled:A=!1}=e;A||c(y,x)},U=C("popconfirm",o),L=M(U,p),[_]=xe(U);return _(s.createElement(Q,Object.assign({},We(f,["title"]),{trigger:i,placement:l,onOpenChange:N,open:b,ref:n,overlayClassName:L,content:s.createElement(be,Object.assign({okType:m,icon:d},e,{prefixCls:U,close:j,onConfirm:g,onCancel:E})),"data-popover-inject":!0}),u))}),ye=jt;ye._InternalPanelDoNotUseOrYouWillBeFired=Ct;var Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Pt=function(n,r){return s.createElement(Ve,He({},n,{ref:r,icon:Ot}))},wt=s.forwardRef(Pt);const Et=e=>e?ce(e).format("YYYY-MM-DD"):"-",$t=e=>e.format("YYYY-MM-DD"),Nt=({onEdit:e,onDelete:n})=>[{title:"Avatar",key:"avatar",width:80,render:(r,t)=>a.jsx(he,{src:t.avatarUrl,icon:a.jsx(Ge,{})})},{title:"Full Name",dataIndex:"fullName",sorter:!0},{title:"Email",dataIndex:"email"},{title:"Role",dataIndex:"role",filters:[{text:"Admin",value:"ADMIN"},{text:"User",value:"USER"}],render:r=>a.jsx(ne,{color:r==="ADMIN"?"red":"blue",children:r})},{title:"Status",dataIndex:"isActive",filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],render:r=>a.jsx(ne,{color:r?"success":"error",children:r?"Active":"Inactive"})},{title:"Birthday",dataIndex:"birthday",render:r=>Et(r)},{title:"Actions",key:"actions",render:(r,t)=>a.jsxs(de,{children:[a.jsx(J,{icon:a.jsx(tt,{}),onClick:()=>e(t),children:"Edit"}),a.jsx(ye,{title:"Delete user",description:"Are you sure you want to delete this user?",onConfirm:()=>n(t),okText:"Yes",cancelText:"No",children:a.jsx(J,{danger:!0,icon:a.jsx(wt,{}),children:"Delete"})})]})}],{Search:It}=D,zt=({onSearch:e,onFilterChange:n})=>a.jsxs(de,{className:"mb-4",size:"middle",children:[a.jsx(It,{placeholder:"Search by name or email",allowClear:!0,onSearch:e,style:{width:300},prefix:a.jsx(nt,{})}),a.jsx(F,{placeholder:"Filter by role",allowClear:!0,style:{width:200},onChange:r=>n({role:r}),options:[{label:"Admin",value:"ADMIN"},{label:"User",value:"USER"}]}),a.jsx(F,{placeholder:"Filter by status",allowClear:!0,style:{width:200},onChange:r=>n({status:r}),options:[{label:"Active",value:!0},{label:"Inactive",value:!1}]})]}),kt=({users:e,loading:n,total:r,pagination:t,onPaginationChange:o,onEdit:l,onDelete:i,onSearch:m,onFilterChange:d})=>{const u=Nt({onEdit:l,onDelete:i});return a.jsxs(rt,{children:[a.jsx(zt,{onSearch:m,onFilterChange:d}),a.jsx(Ze,{columns:u,dataSource:e,loading:n,rowKey:"id",pagination:{total:r,current:t.page,pageSize:t.limit,onChange:o,showSizeChanger:!0}})]})},Ut=({isEdit:e,rules:n})=>a.jsxs(a.Fragment,{children:[a.jsx(k.Item,{name:"fullName",label:"Full Name",rules:n.fullName,children:a.jsx(D,{})}),!e&&a.jsxs(a.Fragment,{children:[a.jsx(k.Item,{name:"email",label:"Email",rules:n.email,children:a.jsx(D,{})}),a.jsx(k.Item,{name:"password",label:"Password",rules:n.password,children:a.jsx(D.Password,{})})]}),a.jsx(k.Item,{name:"phone",label:"Phone",children:a.jsx(D,{})}),a.jsx(k.Item,{name:"role",label:"Role",rules:n.role,children:a.jsxs(F,{children:[a.jsx(F.Option,{value:"ADMIN",children:"Admin"}),a.jsx(F.Option,{value:"USER",children:"User"})]})}),a.jsx(k.Item,{name:"gender",label:"Gender",children:a.jsxs(F,{children:[a.jsx(F.Option,{value:"MALE",children:"Male"}),a.jsx(F.Option,{value:"FEMALE",children:"Female"}),a.jsx(F.Option,{value:"OTHER",children:"Other"})]})}),a.jsx(k.Item,{name:"birthday",label:"Birthday",children:a.jsx(Ye,{className:"w-full"})}),e&&a.jsxs(a.Fragment,{children:[a.jsx(k.Item,{name:"addressDetail",label:"Address",children:a.jsx(D.TextArea,{})}),a.jsx(k.Item,{name:["social","facebook"],label:"Facebook",children:a.jsx(D,{})}),a.jsx(k.Item,{name:["social","zalo"],label:"Zalo",children:a.jsx(D,{})})]})]}),At=()=>({fullName:[{required:!0,message:"Please enter full name"},{min:2,message:"Name must be at least 2 characters"}],email:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],password:[{required:!0,message:"Please enter password"},{min:8,message:"Password must be at least 8 characters"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,message:"Password must contain both letters and numbers"}],role:[{required:!0,message:"Please select role"}]}),Tt=({open:e,user:n,onCancel:r,onSubmit:t,loading:o})=>{const[l]=k.useForm(),i=At(),m=!!n,d=u=>{const p={...u,birthday:u.birthday?$t(u.birthday):void 0};t(p)};return a.jsx(Qe,{title:m?"Edit User":"Add User",open:e,onCancel:r,onOk:l.submit,confirmLoading:o,width:600,children:a.jsx(k,{form:l,layout:"vertical",initialValues:{...n,birthday:n!=null&&n.birthday?ce(n.birthday):void 0},onFinish:d,children:a.jsx(Ut,{isEdit:m,rules:i})})})},Bt=[{id:q(),name:"John Doe",fullName:"John Doe",email:"john@example.com",role:"ADMIN",gender:"MALE",birthday:"1990-01-01",isActive:!0,status:"active",phone:"+1234567890",avatarUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",social:{facebook:"john.doe",zalo:"123456789"}},{id:q(),name:"Jane Smith",fullName:"Jane Smith",email:"jane@example.com",role:"USER",gender:"FEMALE",birthday:"1992-05-15",isActive:!0,status:"active",phone:"+1987654321",avatarUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Jane"},{id:q(),name:"Bob Wilson",fullName:"Bob Wilson",email:"bob@example.com",role:"USER",gender:"MALE",isActive:!1,status:"inactive",avatarUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Bob"}];let R=[...Bt];const X={getUsers:e=>new Promise(n=>{setTimeout(()=>{let r=[...R];if(e.search){const l=e.search.toLowerCase();r=r.filter(i=>i.fullName.toLowerCase().includes(l)||i.email.toLowerCase().includes(l))}e.status!==void 0&&(r=r.filter(l=>l.isActive===e.status)),e.role&&(r=r.filter(l=>l.role===e.role));const t=(e.page-1)*e.limit,o=r.slice(t,t+e.limit);n({data:o,total:r.length,page:e.page,limit:e.limit})},500)}),createUser:e=>new Promise(n=>{setTimeout(()=>{const r={id:q(),name:e.name,fullName:e.fullName,email:e.email,role:e.role,gender:e.gender,birthday:e.birthday,isActive:!0,status:e.status,phone:e.phone,departmentId:e.departmentId,avatarUrl:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.fullName}`};R.push(r),n(r)},500)}),updateUser:(e,n)=>new Promise((r,t)=>{setTimeout(()=>{const o=R.findIndex(l=>l.id===e);if(o===-1){t(new Error("User not found"));return}R[o]={...R[o],...n},r(R[o])},500)}),deleteUser:e=>new Promise((n,r)=>{setTimeout(()=>{if(R.findIndex(o=>o.id===e)===-1){r(new Error("User not found"));return}R=R.filter(o=>o.id!==e),n()},500)})},Xt=()=>{const[e,n]=s.useState([]),[r,t]=s.useState(!1),[o,l]=s.useState(0),[i,m]=s.useState({page:1,limit:10}),[d,u]=s.useState({}),[p,h]=s.useState(""),[v,f]=s.useState(!1),[C,b]=s.useState(),S=async()=>{t(!0);try{const g=await X.getUsers({...i,...d,search:p});n(g.data),l(g.total)}catch{G.error({message:"Error",description:"Failed to fetch users"})}finally{t(!1)}};s.useEffect(()=>{S()},[i,d,p]);const c=async g=>{try{t(!0),C?(await X.updateUser(C.id,g),G.success({message:"Success",description:"User updated successfully"})):(await X.createUser(g),G.success({message:"Success",description:"User created successfully"})),f(!1),b(void 0),S()}catch{G.error({message:"Error",description:C?"Failed to update user":"Failed to create user"})}finally{t(!1)}},j=async g=>{try{await X.deleteUser(g.id),G.success({message:"Success",description:"User deleted successfully"}),S()}catch{G.error({message:"Error",description:"Failed to delete user"})}};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Users"}),a.jsx(J,{type:"primary",icon:a.jsx(ot,{}),onClick:()=>{b(void 0),f(!0)},children:"Add User"})]}),a.jsx(kt,{users:e,loading:r,total:o,pagination:i,onPaginationChange:(g,E)=>m({page:g,limit:E}),onEdit:g=>{b(g),f(!0)},onDelete:j,onSearch:h,onFilterChange:u}),a.jsx(Tt,{open:v,user:C,onCancel:()=>{f(!1),b(void 0)},onSubmit:c,loading:r})]})};export{Xt as default};
