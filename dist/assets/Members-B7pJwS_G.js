import{j as e,h as x,n as h,u as b,b as u,s as f,L as g}from"./index-DWVIrarL.js";import{F as M,T as p,S as D,M as v,a as l}from"./index-7Imk3y3v.js";import{B as N}from"./button-ZitA0x0c.js";import{d as y,D as S}from"./index-Cow5DHak.js";import{F as d,I,s as j}from"./index-CL68ldrU.js";import{P as E}from"./PageHeader-Bk3zmmyy.js";import{C as w}from"./index-BwZGRhAa.js";import"./compact-item-C3Bf5F0_.js";import"./TextArea-ecw0KRlF.js";import"./useForceUpdate-DW7K_nWO.js";import"./EditOutlined-D1PyGwBW.js";const F=({members:s,loading:r,onEdit:i})=>{const n=[{title:"Name",dataIndex:"name",key:"name",sorter:(a,t)=>a.name.localeCompare(t.name),className:"text-gray-900 font-medium"},{title:"Role",dataIndex:"role",key:"role",render:a=>e.jsx(p,{color:a==="ADMIN"?"red":"blue",className:"rounded-full",children:a}),filters:[{text:"Admin",value:"ADMIN"},{text:"User",value:"USER"}],onFilter:(a,t)=>t.role===a},{title:"Status",dataIndex:"status",key:"status",render:a=>e.jsx(p,{color:a==="active"?"green":"orange",className:"rounded-full",children:a}),filters:[{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}],onFilter:(a,t)=>t.status===a},{title:"Join Date",dataIndex:"joinDate",key:"joinDate",sorter:(a,t)=>!a.joinDate||!t.joinDate?0:new Date(a.joinDate).getTime()-new Date(t.joinDate).getTime(),className:"text-gray-600"},{title:"Actions",key:"actions",render:(a,t)=>e.jsx(D,{children:e.jsx(N,{type:"primary",onClick:()=>i(t),className:"hover:opacity-90",children:"Edit"})})}];return e.jsx("div",{className:"overflow-hidden rounded-lg shadow",children:e.jsx(M,{columns:n,dataSource:s,loading:r,rowKey:"id",className:"bg-white",pagination:{defaultPageSize:10,showSizeChanger:!0,showTotal:a=>`Total ${a} members`,className:"px-6 py-4"}})})},k=({visible:s,member:r,onCancel:i,onSave:n,loading:a})=>{const[t]=d.useForm();x.useEffect(()=>{s&&r&&t.setFieldsValue({...r,joinDate:r.joinDate?y(r.joinDate):void 0})},[s,r,t]);const o=m=>{var c;n({...m,joinDate:(c=m.joinDate)==null?void 0:c.format("YYYY-MM-DD")})};return e.jsx(v,{title:"Edit Member",open:s,onCancel:i,onOk:t.submit,confirmLoading:a,className:"top-8",children:e.jsxs(d,{form:t,layout:"vertical",onFinish:o,className:"pt-4",children:[e.jsx(d.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter name"}],children:e.jsx(I,{className:"rounded-md"})}),e.jsx(d.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select role"}],children:e.jsxs(l,{className:"rounded-md",children:[e.jsx(l.Option,{value:"ADMIN",children:"Admin"}),e.jsx(l.Option,{value:"USER",children:"User"})]})}),e.jsx(d.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(l,{className:"rounded-md",children:[e.jsx(l.Option,{value:"active",children:"Active"}),e.jsx(l.Option,{value:"inactive",children:"Inactive"})]})}),e.jsx(d.Item,{name:"joinDate",label:"Join Date",children:e.jsx(S,{className:"w-full rounded-md"})})]})})},A=()=>{const s=h(),{members:r,loading:i}=b(o=>o.members),[n,a]=u.useState(null),t=u.useCallback((o,m)=>{try{s(f({id:o,updates:m})),j.success({message:"Member Updated",description:"Member information has been updated successfully."})}catch{a("Failed to update member"),j.error({message:"Error",description:"Failed to update member information."})}},[s]);return{members:r,loading:i,error:n,updateMember:t}},J=()=>{const[s,r]=u.useState(null),{members:i,loading:n,updateMember:a}=A(),t=o=>{s&&(a(s.id,o),r(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{title:"Team Members",subtitle:"Manage your team members"}),e.jsxs(g,{spinning:n,children:[e.jsx(w,{className:"shadow-md",children:e.jsx(F,{members:i,loading:n,onEdit:r})}),e.jsx(k,{visible:!!s,member:s,onCancel:()=>r(null),onSave:t,loading:n})]})]})};export{J as default};
